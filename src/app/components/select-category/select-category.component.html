<button type="button" class="input flex" (click)="visible.set(true)">
    <div>
        @if(placeholder() && !selectedCategory()){
        <span class="text-color-secondary">{{placeholder()}}</span>
        }@else if(selectedCategory()) {
        <div class="flex gap-3 items-center">
            <app-icon-item size="small" [color_id]="selectedCategory()?.colorId!"
                [icon_id]="selectedCategory()?.iconId!" />
            <p class="text-color">{{selectedCategory()?.name}}</p>
        </div> }
    </div>
    <i class="pi pi-tag"></i>
</button>

<app-dialog [(visible)]="visible" header="Selecione uma categoria" [fullScreen]="true" size="normal">
    <div class="flex flex-col gap-5 pt-2">
        <p-iconfield>
            <input [(ngModel)]="search" type="text" pInputText placeholder="Pesquisar" [fluid]="true" size="large" />
            <p-inputicon class="pi pi-search" />
        </p-iconfield>

        @if(filteredCategories().length > 0){
            @for (item of filteredCategories(); track item.id) {
            <div class="flex gap-3 items-center cursor-pointer hover"
                (click)="selectChange.emit(item.id);visible.set(false)">
                <app-icon-item [color_id]="item.colorId" [icon_id]="item.iconId" />
                <h2 class="font-medium">{{item.name}}</h2>
            </div> }
        }@else if(search()){
           <div class="flex flex-col gap-5 items-center mt-10">
                <p class="text-lg">Não há nenhuma categoria com esse nome</p>
                <p-button label="Criar" (click)="service.visibleAddCategories.set(true)" />
           </div>
        }@else {
            <div class="flex flex-col gap-5 items-center mt-10">
                <p class="text-lg">Você ainda não criou nenhuma categoria</p>
                <p-button label="Criar" (click)="service.visibleAddCategories.set(true)" />
            </div>
        }


    </div>
</app-dialog>

<app-categories-add />