<div class="flex flex-col gap-5">
    <p-accordion value="0">
        <p-accordion-panel value="0">
            <p-accordion-header>Importar OFX</p-accordion-header>
            <p-accordion-content>
                <app-import-ofx (onParsedata)="onParseData($event)" />
            </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="1">
            <p-accordion-header>Importar texto</p-accordion-header>
            <p-accordion-content>
                <app-import-text (onParsedata)="onParseData($event)" />
            </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="2">
            <p-accordion-header>Importar Imagem</p-accordion-header>
            <p-accordion-content>
                <app-import-image (onParseData)="onParseData($event)" />
            </p-accordion-content>
        </p-accordion-panel>
    </p-accordion>


    @if(transactions().length > 0){
        <p-table [value]="transactions()" [(selection)]="selectedTransactions" selectionMode="multiple">
            <ng-template #header>
                <tr>
                    <th style="min-width: 2rem"><p-tableHeaderCheckbox /></th>
                    <th style="min-width: 5rem">Valor</th>
                    <th>Data</th>
                    <th>Descrição</th>
                </tr>
            </ng-template>
            <ng-template #body let-transaction>
                <tr>
                    <td>
                        <p-tableCheckbox [value]="transaction" />
                    </td>
                    <td>{{ transaction.amount | currency : 'R$'}}</td>
                    <td>{{ transaction.date | date : 'dd MMM yyy' }} </td>
                    <td>{{ transaction.title }}</td>
                </tr>
            </ng-template>
        </p-table>

        <div class="flex gap-2 mt-4">
            <p-checkbox [(ngModel)]="ignoreDuplicates" [binary]="true" />
            <label pTooltip="Ignora transações que possuem a mesma data e valor de transações já inseridas"
                tooltipPosition="top">Ignorar transações duplicatas</label>
        </div>

        <p-button (click)="onSaveSelectedTransactions()" [loading]="savingTransactions()" styleClass="w-full" label="Salvar selecionados" [disabled]="selectedTransactions().length == 0" />

    }

    
</div>